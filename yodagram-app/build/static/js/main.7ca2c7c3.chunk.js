(this["webpackJsonpyodagram-app"]=this["webpackJsonpyodagram-app"]||[]).push([[0],{43:function(e,t,a){},69:function(e,t,a){"use strict";a.r(t);var n=a(2),s=a(34),r=a.n(s),c=(a(43),a(15)),o=a(36),l=a(37),i=a(6),u=a(4),d=a(38),b=a(8),j={userInfo:(localStorage.getItem("currentUser")?JSON.parse(localStorage.getItem("currentUser")):"")||null,loading:!1,error:null,posts:[]},m=function(e,t){switch(t.type){case"AUTH_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{loading:!0,error:null});case"AUTH_SUCCESS":return localStorage.setItem("currentUser",JSON.stringify(t.payload)),Object(b.a)(Object(b.a)({},e),{},{loading:!1,userInfo:t.payload,error:null});case"AUTH_FAILED":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,error:t.payload});case"FOLLOW_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"FOLLOW_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{userInfo:Object(b.a)(Object(b.a)({},e.userInfo),t.payload),loading:!1});case"POSTS_REQUEST":return Object(b.a)(Object(b.a)({},e),{},{loading:!0});case"POSTS_SUCCESS":return Object(b.a)(Object(b.a)({},e),{},{posts:t.payload,loading:!1});case"POSTS_FAIL":return Object(b.a)(Object(b.a)({},e),{},{loading:!1,error:t.payload});case"POST_DELETE":return Object(b.a)(Object(b.a)({},e),{},{posts:Object(d.a)(e.posts.filter((function(e){return e._id!==t.payload})))});case"LOGOUT":return Object(b.a)(Object(b.a)({},e),{},{userInfo:null,loading:!1});default:return{initialState:e}}},p=a(1),x=Object(n.createContext)(),h=Object(n.createContext)(),f=function(){var e=Object(n.useContext)(x);if(void 0===e)throw new Error("authState context must be within AuthProvider");return e},O=function(){var e=Object(n.useContext)(h);if(void 0===e)throw new Error("authDispatch context must be within auth provider");return e},g=function(e){var t=e.children,a=Object(n.useReducer)(m,j),s=Object(u.a)(a,2),r=s[0],c=s[1];return Object(p.jsx)(x.Provider,{value:r,children:Object(p.jsx)(h.Provider,{value:c,children:t})})},v=a(3),y=a.n(v),w=a(5),N=a(7),k=a.n(N),S=function(){var e=Object(w.a)(y.a.mark((function e(t,a){var n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"AUTH_REQUEST"}),e.prev=1,e.next=4,k.a.post("/api/users/login",a,{headers:{"Content-Type":"application/json"}});case 4:n=e.sent,s=n.data,t({type:"AUTH_SUCCESS",payload:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"AUTH_FAILED",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.response});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),C=function(){var e=Object(w.a)(y.a.mark((function e(t,a){var n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"AUTH_REQUEST"}),e.prev=1,e.next=4,k.a.post("/api/users/register",a,{headers:{"Content-Type":"application/json"}});case 4:n=e.sent,s=n.data,t({type:"AUTH_SUCCESS",payload:s}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),t({type:"AUTH_FAILED",payload:e.t0.response&&e.t0.response.data.message?e.t0.response.data.message:e.t0.response});case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(w.a)(y.a.mark((function e(t,a,n){var s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:"FOLLOW_REQUEST"}),e.prev=1,e.next=4,k.a.put("/api/users/follow",{followID:a},{headers:{Authorization:"Bearer ".concat(n)}});case 4:s=e.sent,r=s.data,console.log(r),t({type:"FOLLOW_SUCCESS",payload:r}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n){return e.apply(this,arguments)}}(),E=function(e){e({type:"LOGOUT"}),localStorage.removeItem("currentUser")},L=function(){var e=O(),t=f().userInfo;return Object(p.jsx)("header",{className:"border-b fixed top-0 bg-white w-full z-20",children:Object(p.jsxs)("nav",{className:"flex justify-around items-center p-4",children:[Object(p.jsx)(i.b,{to:"/",className:"",children:Object(p.jsx)("img",{src:"/yodagram.png",className:"w-28",alt:"logo"})}),t?Object(p.jsxs)(p.Fragment,{children:[" ",Object(p.jsx)("form",{className:"relative md:block hidden",onSubmit:function(e){e.preventDefault()},children:Object(p.jsx)("input",{type:"search",className:"px-4 py-2 w-full  border rounded outline-none bg-gray-100 focus:border-gray-300",placeholder:"search"})}),Object(p.jsxs)("ul",{className:"flex items-center gap-10",children:[Object(p.jsx)("li",{className:"cursor-pointer hidden md:block rounded-full p-1 hover:bg-gray-200",children:Object(p.jsx)(i.b,{to:"/",children:Object(p.jsx)(c.b,{className:"text-3xl "})})}),Object(p.jsx)("li",{className:"cursor-pointer hidden md:block rounded-full p-1 hover:bg-gray-200",children:Object(p.jsx)(i.b,{to:"/createpost",children:Object(p.jsx)(c.c,{className:"text-3xl ",onClick:function(){}})})}),Object(p.jsxs)("li",{className:"w-8 cursor-pointer relative ",onClick:function(){var e=document.querySelector("#menu"),t=document.querySelector("#avatar");e.classList.contains("hidden")?(e.classList.remove("hidden"),t.classList.add("border"),t.classList.add("border-black")):(e.classList.add("hidden"),t.classList.remove("border"),t.classList.remove("border-black"))},children:[Object(p.jsx)("img",{src:t.profilePic,alt:"",className:"rounded-full w-8 h-8 object-cover",id:"avatar"}),Object(p.jsxs)("ul",{id:"menu",className:"border absolute shadow-lg rounded bg-white top-10 right-0 lg:left-0 w-32  hidden ",children:[Object(p.jsx)(i.b,{to:"/users/".concat(t._id),children:Object(p.jsxs)("li",{className:"p-3 hover:bg-gray-200 flex items-center justify-evenly font-bold text-gray-700",children:[Object(p.jsx)(o.a,{className:"inline text-xl "})," profile"]})}),Object(p.jsx)("button",{className:"block w-full",onClick:function(){E(e)},children:Object(p.jsxs)("li",{className:"p-3  hover:bg-gray-200 flex items-center justify-evenly font-bold text-gray-700",children:[Object(p.jsx)(l.a,{className:"inline text-xl "}),"logout"]})})]})]})]})]}):Object(p.jsxs)("div",{className:"flex gap-10",children:[Object(p.jsx)(i.c,{activeClassName:"underline",to:"/login",children:"Login"}),Object(p.jsx)(i.c,{activeClassName:"underline",to:"/register",children:"Register"})]})]})})},T=a(9),A=a(20),U=function(e){var t=e.post,a=e.index,s=(e.history,Object(n.useState)("")),r=Object(u.a)(s,2),c=r[0],o=r[1],l=Object(n.useState)({username:"",profilePic:""}),d=Object(u.a)(l,2),b=d[0],j=d[1],m=Object(n.useState)(t),x=Object(u.a)(m,2),h=x[0],g=x[1],v=f().userInfo,N=O(),S=function(){var e=Object(w.a)(y.a.mark((function e(){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users/avatar/".concat(t.user),{headers:{Authorization:"Bearer ".concat(v.token)}});case 3:a=e.sent,n=a.data,j(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/posts/".concat(t._id),{headers:{Authorization:"Bearer ".concat(v.token)}});case 3:N({type:"POST_DELETE",payload:t._id}),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(w.a)(y.a.mark((function e(a){var n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.prev=1,e.next=4,k.a.post("/api/posts/".concat(t._id,"/comments"),{comment:c},{headers:{Authorization:"Bearer ".concat(v.token)}});case 4:n=e.sent,s=n.data,console.log(s),g(s),o(""),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){S()}),[]),Object(p.jsxs)("div",{className:"border   xl:w-4/5 lg:w-4/5 w-full xl:m-5 lg:m-3 lg:my-10 my-2 rounded bg-white",children:[Object(p.jsxs)("div",{className:"flex justify-between p-4 mx-auto items-center  border-b",children:[Object(p.jsxs)(i.b,{to:"/users/".concat(h.user),className:"flex items-center gap-3",children:[Object(p.jsx)("img",{src:b.profilePic,alt:"",className:"w-10 h-10 rounded-full inline-block border border-gray border-opacity-50 border-semibold"}),Object(p.jsxs)("span",{className:"font-bold text-gray-600 hover:underline",children:[" ",b.username]})]}),Object(p.jsxs)("div",{className:"relative",children:[Object(p.jsx)(A.a,{className:"text-xl cursor-pointer",onClick:function(){var e=document.querySelector("#post".concat(a));e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")}}),Object(p.jsxs)("ul",{id:"post".concat(a),className:"border absolute shadow-lg z-20 rounded bg-white top-5 lg:left-0 right-0 lg:left-0 w-32  hidden ",children:[v&&v._id===t.user?Object(p.jsx)("li",{onClick:C,className:"p-3 hover:bg-gray-200 cursor-pointer flex items-center justify-evenly font-bold text-red-700",children:"Delete"}):Object(p.jsx)("li",{onClick:function(){_(N,t.user,v.token)},className:"p-3 hover:bg-gray-200 cursor-pointer flex items-center justify-evenly font-bold text-blue-700",children:"unfollow"}),Object(p.jsx)("li",{onClick:function(){return document.querySelector("#post".concat(a)).classList.add("hidden")},className:"p-3  hover:bg-gray-200 flex cursor-pointer items-center justify-evenly font-bold text-gray-700",children:"Cancel"})]})]})]}),Object(p.jsxs)(i.b,{to:"/posts/".concat(h._id),children:[" ",Object(p.jsx)("img",{src:h.image,alt:"",className:"w-full max-h-full\tmin-h-96"})]}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:" text-gray-600  mx-5 my-5 ",children:[Object(p.jsxs)("p",{className:"cursor-pointer  my-3   ",children:[" ",Object(p.jsxs)("span",{className:"font-bold mx-2",children:[b.username," :"]})," ",h.info&&t.info]}),h.comments.length>3&&Object(p.jsxs)("p",{className:"cursor-pointer  my-3 mx-2 text-lg text-gray-400",children:["View all ",h.comments.length," comments"]}),h.comments&&h.comments.map((function(e,t){return t<3&&Object(p.jsxs)("div",{className:"my-1 text-xs",children:[Object(p.jsx)("span",{className:"font-bold mx-2",children:e.user_name})," ",e.comment]},e._id)}))]}),Object(p.jsxs)("form",{onSubmit:E,className:"border-t p-2 flex justify-around",children:[Object(p.jsx)("textarea",{type:"text",placeholder:"Add a comment",className:"outline-none w-5/6 p-3 resize-none\t",value:c,onChange:function(e){o(e.target.value)}}),c.length>0?Object(p.jsx)("button",{className:"text-blue-400 font-bold p-3 outline-none ",children:"Post"}):Object(p.jsx)("button",{className:"text-blue-200 font-bold p-3 outline-none  ",disabled:!0,children:"Post"})]})]})]})},P=function(e){var t=e.userInfo,a=Object(n.useState)([]),s=Object(u.a)(a,2),r=s[0],c=s[1],o=O(),l=function(){var e=Object(w.a)(y.a.mark((function e(){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users/suggest",{headers:{Authorization:"Bearer ".concat(t.token)}});case 3:a=e.sent,n=a.data,c(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){l()}),[]),Object(n.useEffect)((function(){l()}),[t]),Object(p.jsx)("div",{children:t&&r.length>0?Object(p.jsx)("div",{children:r.map((function(e){return e._id!==t._id&&Object(p.jsxs)("div",{className:"my-3 mx-10 flex justify-between items-center",children:[Object(p.jsxs)("h1",{className:"",children:[Object(p.jsx)("img",{src:e.profilePic,alt:"",className:"ml-7 w-10 h-10 rounded-full inline-block object-cover"}),Object(p.jsxs)(i.b,{to:"/users/".concat(e._id),className:"inline-block font-bold mx-6 text-gray-500",children:[e.username," "]})]}),Object(p.jsx)("button",{className:"text-blue-500 outline-none border-none",onClick:function(){return _(o,e._id,t.token)},children:-1===e.followers.indexOf(t._id)?Object(p.jsx)(p.Fragment,{children:"follow"}):Object(p.jsx)(p.Fragment,{children:"unfollow"})})]},e._id)}))}):Object(p.jsx)("div",{className:"text-center text-gray-400 font-bold",children:"no suggest"})})},I=function(){return Object(p.jsx)("div",{className:"block mx-auto",children:Object(p.jsx)("img",{src:"/spinner.gif",alt:"spinner",className:"mx-auto my-4"})})},D=function(e){var t=e.history,a=f(),s=a.userInfo,r=a.loading,o=a.error,l=a.posts,u=O(),d=function(){var e=Object(w.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!s){e.next=13;break}return e.prev=1,u({type:"POSTS_REQUEST"}),e.next=5,k.a.get("/api/posts",{headers:{Authorization:"Bearer ".concat(s.token)}});case 5:t=e.sent,a=t.data,u({type:"POSTS_SUCCESS",payload:a}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),u({type:"POSTS_FAIL",payload:e.t0.message});case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s?d():t.push("/login")}),[]),Object(n.useEffect)((function(){s||t.push("/login"),d()}),[s]),Object(p.jsxs)("div",{className:"container mx-auto select-none\t",children:[Object(p.jsx)(i.b,{to:"/createpost",className:"lg:hidden mx-auto m-2 w-full border bg-white p-2 block",children:Object(p.jsx)(c.d,{className:"w-full text-2xl"})}),Object(p.jsxs)("div",{className:" grid grid-cols-5 lg:my-5 my-1 lg:mx-16  mx-2 ",children:[Object(p.jsxs)("div",{className:"xl:col-span-3 col-span-5",children:[r&&Object(p.jsx)(I,{}),o&&Object(p.jsx)("div",{children:o}),l&&l.length>0?l.map((function(e,t){return Object(p.jsx)(U,{index:t,post:e},e._id)})):Object(p.jsxs)("h1",{className:"text-2xl text-gray-400 font-semibold text-center m-10",children:["there no posts follow some one"," "]})]}),Object(p.jsx)("div",{className:"xl:col-span-2 hidden  xl:block ",children:Object(p.jsxs)("div",{className:"fixed right-0  my-5 z-10  xl:w-700   ",children:[Object(p.jsxs)("div",{className:"m-10 flex justify-around items-center",children:[Object(p.jsxs)("h1",{className:"",children:[Object(p.jsx)("img",{src:s?s.profilePic:"",alt:"",className:"w-20 h-20 scale-50\trounded-full inline-block object-cover"}),Object(p.jsx)("span",{className:"inline-block font-bold mx-6 text-gray-500 ",children:s?s.username:""})]}),Object(p.jsx)("button",{onClick:function(){E(u)},className:"text-blue-500",children:"logout"})]}),Object(p.jsx)("div",{className:"m-10 flex justify-around items-center",children:Object(p.jsx)("h1",{className:"text-gray-400 font-semibold text-xl",children:"Suggestions For You"})}),Object(p.jsx)(P,{userInfo:s})]})})]})]})},z=function(e){var t=e.history,a=e.match,s=f().userInfo,r=O(),c=Object(n.useState)({}),o=Object(u.a)(c,2),l=o[0],d=o[1],b=function(){var e=Object(w.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users/".concat(a.params.id),{headers:{Authorization:"Bearer ".concat(s.token)}});case 3:t=e.sent,n=t.data,d(n),console.log(n),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(0);case 11:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){s||t.push("/login"),b()})),Object(n.useEffect)((function(){s||t.push("/login"),b()}),[s,a.params.id]),Object(p.jsxs)("div",{className:"container mx-auto flex flex-col justify-between items-center w-full",children:[Object(p.jsxs)("div",{className:"flex lg:gap-48 md:gap-32 gap-12 justify-center mx-48 my-10  items-center  w-full",children:[Object(p.jsx)("img",{src:l.profilePic,alt:"",className:"rounded-full lg:w-48 lg:h-48 md:w-32 md:h-32  border object-cover w-24 h-24"}),Object(p.jsxs)("div",{children:[Object(p.jsxs)("div",{className:"flex justify-center lg:text-lg text-sm w-full",children:[Object(p.jsx)("span",{className:"lg:text-4xl   md:text-2xl text-lg font-light\tmd:w-60 w-32",children:l.username}),s&&a.params.id===s._id?Object(p.jsx)("button",{className:"border border-gray-400 px-2 py-1 w-full   mx-5  rounded font-semibold",children:"Edit Profile"}):Object(p.jsx)("button",{onClick:function(){_(r,a.params.id,s.token)},className:"border bg-blue-500 text-white px-2 py-1 lg:w-32 w-20   h-10 mx-5  rounded font-semibold",children:s&&-1===s.following.indexOf(a.params.id)?Object(p.jsx)("span",{children:" follow"}):Object(p.jsx)("span",{children:" unfollow"})})]}),Object(p.jsxs)("div",{className:"flex my-5 md:justify-between justify-around lg:text-xl md:text-md text-sm \t",children:[Object(p.jsxs)("h1",{children:[Object(p.jsx)("span",{className:"font-bold",children:l.posts&&l.posts.length})," ",Object(p.jsx)("span",{children:"posts"})]}),Object(p.jsxs)("h1",{children:[Object(p.jsx)("span",{className:"font-bold",children:l.followers&&l.followers.length-1})," ","followers"]}),Object(p.jsxs)("h1",{children:[Object(p.jsx)("span",{className:"font-bold",children:l.following&&l.following.length-1})," ","following"]})]}),Object(p.jsx)("p",{className:"m-2 lg:text-xl text-sm",children:l.bio})]})]}),Object(p.jsx)("div",{className:"  grid md:grid-cols-3 grid-cols-2  mx-auto justify-items-center lg:gap-16 gap-10 border-t pt-20\t",children:l.posts&&l.posts.length>0?l.posts.map((function(e){return Object(p.jsxs)(i.b,{to:"/posts/".concat(e._id),className:"lg:w-80 lg:h-80 md:w-60 md:h-60 w-40 h-40 overflow-hidden  relative  cursor-pointer",children:[Object(p.jsx)("img",{className:"object-cover  w-full h-full",src:e.image}),Object(p.jsx)("div",{className:"absolute   w-full h-full hover:block hover:bg-black hover:opacity-50  top-0"})]},e._id)})):Object(p.jsx)("div",{className:"text-center col-span-3  text-gray-700 font-light",children:"you havent posted anything yet"})})]})},q=function(e){var t=e.match,a=e.history,s=Object(n.useState)(null),r=Object(u.a)(s,2),o=r[0],l=r[1],d=Object(n.useState)(null),b=Object(u.a)(d,2),j=(b[0],b[1]),m=Object(n.useState)(""),x=Object(u.a)(m,2),h=x[0],g=x[1],v=Object(n.useState)({username:"",profilePic:""}),N=Object(u.a)(v,2),S=N[0],C=N[1],_=f().userInfo,E=O();Object(n.useEffect)((function(){_||a.push("/login"),I()}),[]),Object(n.useEffect)((function(){U()}),[o]),Object(n.useEffect)((function(){_||a.push("/login")}),[_]);var L=function(){var e=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/posts/".concat(o._id),{headers:{Authorization:"Bearer ".concat(_.token)}});case 3:E({type:"POST_DELETE",payload:o._id}),a.push("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),a.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.delete("/api/posts/".concat(o._id,"/comments/").concat(t),{headers:{Authorization:"Bearer ".concat(_.token)}});case 3:a=e.sent,n=a.data,l(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(w.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/users/avatar/".concat(o.user),{headers:{Authorization:"Bearer ".concat(_.token)}});case 3:t=e.sent,a=t.data,C(a),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),P=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,k.a.post("/api/posts/".concat(o._id,"/comments"),{comment:h},{headers:{Authorization:"Bearer ".concat(_.token)}});case 4:a=e.sent,n=a.data,console.log(n),l(n),g(""),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(1);case 13:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(w.a)(y.a.mark((function e(){var a,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,k.a.get("/api/posts/".concat(t.params.id),{headers:{Authorization:"Bearer ".concat(_.token)}});case 3:a=e.sent,n=a.data,l(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),j(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"w-full",children:[Object(p.jsx)("div",{onClick:function(){var e=document.querySelector("#imagebg"),t=document.querySelector("#image");e.classList.add("hidden"),t.classList.add("hidden")},id:"imagebg",className:" w-full bg-black cursor-pointer fixed opacity-70 hidden top-0 h-full z-20 "}),Object(p.jsx)("img",{id:"image",src:o&&o.image,style:{right:"8%"},className:"md:6/12 md:h-6/12 w-10/12 h-10/12    absolute hidden z-30 bottom-0 transform scale-50"}),Object(p.jsx)("div",{className:"container mx-auto  my-5 ",children:o&&Object(p.jsxs)("div",{className:"w-8/12 border   bg-white mx-auto grid md:grid-cols-2 shadow ",style:{maxHeight:"500px"},children:[Object(p.jsxs)("div",{className:"relative",children:[Object(p.jsx)("img",{onClick:function(){var e=document.querySelector("#imagebg"),t=document.querySelector("#image");e.classList.contains("hidden")&&t.classList.contains("hidden")&&(e.classList.remove("hidden"),t.classList.remove("hidden"))},src:o&&"".concat(o.image),className:" md:h-500 cursor-pointer md:w-full object-cover",style:{maxHeight:"500px"}}),o&&_&&o.user===_._id&&Object(p.jsx)(A.a,{onClick:function(){var e=document.querySelector("#post");e.classList.contains("hidden")?e.classList.remove("hidden"):e.classList.add("hidden")},className:"absolute top-2 left-3 cursor-pointer bg-white rounded-full w-10"}),Object(p.jsxs)("ul",{id:"post",className:"border absolute shadow-lg z-20 rounded bg-white top-5   w-24  hidden ",style:{left:-20},children:[_&&_._id===o.user&&Object(p.jsx)("li",{onClick:L,className:"p-3 hover:bg-gray-200 cursor-pointer flex items-center justify-evenly font-bold text-red-700",children:"Delete"}),Object(p.jsx)("li",{onClick:function(){return document.querySelector("#post").classList.add("hidden")},className:"p-3  hover:bg-gray-200 flex cursor-pointer items-center justify-evenly font-bold text-gray-700",children:"Cancel"})]})]}),Object(p.jsxs)("div",{className:"border  relative h-full",style:{maxHeight:"500px"},children:[Object(p.jsxs)("h1",{className:"   border-b my-2 p-2 absolute w-full",children:[Object(p.jsxs)(i.b,{to:"/users/".concat(o.user),children:[Object(p.jsx)("img",{src:S&&S.profilePic,alt:"",className:"w-8 h-8 rounded-full inline-block"}),Object(p.jsxs)("span",{className:"text-sm font-semibold text-gray-600",children:[" ",S.username]})," "]}),Object(p.jsx)("span",{className:"text-xs text-gray-600",children:o.info})]}),Object(p.jsx)("div",{className:"mt-20  overflow-y-scroll scrollbar ",style:{minHeight:"200px"},children:o&&o.comments.length>0?o.comments.map((function(e){return Object(p.jsxs)("div",{className:"flex items-center",children:[Object(p.jsxs)("div",{className:" text-sm  p-2",children:[Object(p.jsx)("span",{className:"font-semibold mx-2",children:e.user_name})," ",e.comment]}),_&&e.user_id===_._id&&Object(p.jsx)(c.a,{className:"text-sm ml-4 text-red-500 cursor-pointer ",onClick:function(){return T(e._id)}})]},e._id)})):Object(p.jsx)("h1",{className:"text-center text-gray-300 font-bold",children:"no comments"})}),Object(p.jsxs)("form",{onSubmit:P,className:"border-t p-2 flex justify-around absolute bg-white h-20 md:bottom-0 bottom-01 w-full",children:[Object(p.jsx)("textarea",{type:"text",placeholder:"Add a comment",className:"outline-none w-full  p-3 resize-none\t",value:h,onChange:function(e){g(e.target.value)}}),h.length>0?Object(p.jsx)("button",{className:"text-blue-400 font-bold p-3 outline-none ",children:"Post"}):Object(p.jsx)("button",{className:"text-blue-200 font-bold p-3 outline-none  ",disabled:!0,children:"Post"})]})]})]})})]})},F=function(e){var t=e.history,a=Object(n.useState)(""),s=Object(u.a)(a,2),r=s[0],c=s[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),d=l[0],b=l[1],j=O(),m=f(),x=m.userInfo,h=m.error,g=m.loading;Object(n.useEffect)((function(){x&&t.push("/")}),[x]);var v=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,S(j,{email:r,password:d});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsxs)("div",{className:"container mx-auto",children:[g&&Object(p.jsx)(I,{}),Object(p.jsxs)("div",{className:"shadow border md:w-2/5 w-4/5 mx-auto bg-white mt-20  text-center",children:[Object(p.jsx)("h1",{className:"text-3xl m-10 font-semibold text-gray-600",children:"Login "}),Object(p.jsxs)("form",{onSubmit:v,children:[Object(p.jsx)("input",{type:"email",required:!0,placeholder:"enter your email",value:r,onChange:function(e){return c(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96 w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"password",required:!0,placeholder:"enter your password",onChange:function(e){return b(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96 w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"submit",value:"Login",className:" block mx-auto m-5 p-3 lg:w-96 w-4/5 bg-black text-white cursor-pointer"})]}),Object(p.jsxs)("p",{className:"m-4",children:["Dont have account ?"," ",Object(p.jsx)(i.b,{to:"/register",className:"hover:underline",children:"Register"})]})]}),h&&Object(p.jsx)("div",{className:"bg-red-300 md:w-2/5 w-4/5 mx-auto my-5 text-center rounded p-3 text-gray-600 font-semibold",children:h})]})},B=function(e){var t=e.history,a=Object(n.useState)(""),s=Object(u.a)(a,2),r=s[0],c=s[1],o=Object(n.useState)(""),l=Object(u.a)(o,2),d=l[0],b=l[1],j=Object(n.useState)(""),m=Object(u.a)(j,2),x=m[0],h=m[1],g=Object(n.useState)(""),v=Object(u.a)(g,2),N=v[0],S=v[1],_=Object(n.useState)({name:""}),E=Object(u.a)(_,2),L=E[0],T=E[1],A=Object(n.useState)(null),U=Object(u.a)(A,2),P=U[0],D=U[1],z=O(),q=f(),F=q.userInfo,B=q.error,H=q.loading,R=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,n,s;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(t.target.files[0]),console.log(t.target),(a=new FormData).append("image",t.target.files[0]),e.next=6,k.a.post("/api/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 6:n=e.sent,s=n.data,console.log(s),D(s);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(w.a)(y.a.mark((function e(t){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,C(z,{username:x,email:r,profilePic:P||null,password:d,birth:N});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){F&&t.push("/")}),[F]),Object(p.jsxs)("div",{className:"container mx-auto",children:[H&&Object(p.jsx)(I,{}),Object(p.jsxs)("div",{className:"shadow border md:w-2/5 w-4/5 mx-auto bg-white mt-20  text-center",children:[Object(p.jsx)("h1",{className:"text-3xl m-10 font-semibold text-gray-600",children:"Register "}),Object(p.jsxs)("form",{onSubmit:Q,children:[Object(p.jsx)("input",{required:!0,type:"email",placeholder:"enter your email",value:r,onChange:function(e){return c(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96 w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"text",placeholder:"enter username",value:x,required:!0,onChange:function(e){return h(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96 w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"date",required:!0,placeholder:"enter your birth Date",value:N,onChange:function(e){return S(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96 w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"text ",defaultValue:L.name,placeholder:"Profile pic ",className:" mx-auto outline-none p-2 border lg:w-72 w-2/5 m-3 focus:border-black"}),Object(p.jsxs)("button",{className:" bg-black text-white md:w-20 w-2/5 p-2 relative cursor-pointer",type:"button",children:[Object(p.jsx)("input",{type:"file",onChange:R,className:"cursor-pointer absolute w-full opacity-0 "}),"uplaod"]}),Object(p.jsx)("input",{type:"password",required:!0,placeholder:"enter your password",onChange:function(e){return b(e.target.value)},className:"block mx-auto outline-none p-2 border lg:w-96  w-4/5 m-3 focus:border-black"}),Object(p.jsx)("input",{type:"submit",value:"Login",className:"block mx-auto m-5 p-3 lg:w-96 w-4/5 bg-black text-white cursor-pointer"})]}),Object(p.jsxs)("p",{className:"m-4",children:["already have account ?"," ",Object(p.jsx)(i.b,{to:"/login",className:"hover:underline",children:"Login"})]})]}),B&&Object(p.jsx)("div",{className:"bg-red-300 md:w-2/5 w-4/5 mx-auto my-5 text-center rounded p-3 text-gray-600 font-semibold",children:B})]})},H=function(){return Object(p.jsxs)("div",{className:"container mx-auto w-full my-20 text-center",children:[Object(p.jsx)("h1",{className:"text-4xl ",children:"404 Page Not Found"}),Object(p.jsx)(i.b,{to:"/",className:"underline block m-2",children:"Go To Home"})]})},R=function(e){var t=e.history,a=f().userInfo,s=Object(n.useState)(null),r=Object(u.a)(s,2),c=r[0],o=r[1],l=Object(n.useState)(null),i=Object(u.a)(l,2),d=i[0],b=i[1],j=Object(n.useState)(null),m=Object(u.a)(j,2),x=m[0],h=m[1],O=Object(n.useState)(null),g=Object(u.a)(O,2),v=g[0],N=g[1],S=function(){var e=Object(w.a)(y.a.mark((function e(t){var a,n,s,r;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o(t.target.files[0]),a=new FormData,n=/jpg|jpeg|png/,!t.target.files[0]){e.next=17;break}if(!n.test("image/".concat(t.target.files[0].type))){e.next=16;break}return a.append("image",t.target.files[0]),e.next=9,k.a.post("/api/upload",a,{headers:{"Content-Type":"multipart/form-data"}});case 9:s=e.sent,r=s.data,console.log(r),b(r),N(null),e.next=17;break;case 16:N("images only");case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){a||t.push("/login")}),[]),Object(n.useEffect)((function(){a||t.push("/login")}),[a]),Object(p.jsxs)("div",{className:"container mx-auto text-center ",children:[v&&Object(p.jsx)("p",{className:"mx-auto w-96",children:v}),Object(p.jsxs)("form",{onSubmit:function(e){e.preventDefault();try{var n=k.a.post("/api/posts",{image:d,info:x},{headers:{Authorization:"Bearer ".concat(a.token)}}).data;console.log(n),t.push("/")}catch(s){N(s.message)}},children:[Object(p.jsx)("input",{type:"text ",defaultValue:c?c.name:"",placeholder:"post image",className:" mx-auto outline-none p-2 border lg:w-72 m-3 w-72 focus:border-black"}),Object(p.jsxs)("button",{className:" bg-black text-white md:w-20 w-20  p-2 relative cursor-pointer",type:"button",children:[Object(p.jsx)("input",{type:"file",required:!0,className:"cursor-pointer absolute w-full opacity-0 ",onChange:S}),"uplaod"]}),Object(p.jsx)("img",{src:d||"/default-image.jpg",alt:"",className:"w-96 mx-auto"}),Object(p.jsx)("textarea",{name:"body",id:"body",cols:"30",rows:"5",value:x||"",onChange:function(e){return h(e.target.value)},className:"border focus:border-black outline-none my-5 w-96 p-2",placeholder:"post body here"}),Object(p.jsx)("input",{type:"submit",value:"ADD",className:"block mx-auto border m-3  px-5  py-2  w-96 bg-black  text-white cursor-pointer"})]})]})},Q=function(){return Object(p.jsx)(g,{children:Object(p.jsxs)(i.a,{children:[Object(p.jsx)(L,{}),Object(p.jsx)("div",{className:"h-20"}),Object(p.jsxs)(T.c,{children:[Object(p.jsx)(T.a,{path:"/",component:D,exact:!0}),Object(p.jsx)(T.a,{path:"/login",component:F}),Object(p.jsx)(T.a,{path:"/register",component:B}),Object(p.jsx)(T.a,{path:"/users/:id",component:z}),Object(p.jsx)(T.a,{path:"/posts/:id",component:q}),Object(p.jsx)(T.a,{path:"/createpost",component:R}),Object(p.jsx)(T.a,{path:"*",exact:!0,component:H})]}),Object(p.jsx)("div",{className:"h-96"})]})})};r.a.render(Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(Q,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.7ca2c7c3.chunk.js.map